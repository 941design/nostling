{
  "created_at": "2026-02-08T12:56:00Z",
  "story_id": "03",
  "questions": [
    {
      "id": "VQ-03-001",
      "category": "correctness",
      "question": "Does docker-compose.e2e-prod.yml use the multi-arch Strfry image?",
      "actionable_check": "Verify image field is ghcr.io/dockur/strfry:latest",
      "evidence_required": ["image_value"],
      "pass_criteria": "Image is ghcr.io/dockur/strfry:latest"
    },
    {
      "id": "VQ-03-002",
      "category": "correctness",
      "question": "Does docker-compose.e2e-prod.yml mount strfry.conf correctly?",
      "actionable_check": "Verify ./strfry.conf:/etc/strfry.conf:ro volume mount",
      "evidence_required": ["mount_value"],
      "pass_criteria": "Config mounted read-only at /etc/strfry.conf"
    },
    {
      "id": "VQ-03-003",
      "category": "correctness",
      "question": "Does docker-compose.e2e-prod.yml have persistent storage volume?",
      "actionable_check": "Verify named volume strfry-data at /app/strfry-db",
      "evidence_required": ["volume_definition"],
      "pass_criteria": "Named volume strfry-data defined and mounted"
    },
    {
      "id": "VQ-03-004",
      "category": "correctness",
      "question": "Is the compose file syntactically valid?",
      "actionable_check": "Run docker compose -f docker-compose.e2e-prod.yml config --quiet",
      "evidence_required": ["validation_result"],
      "pass_criteria": "File parses without errors"
    },
    {
      "id": "VQ-03-005",
      "category": "correctness",
      "question": "Does the prod compose config match the e2e compose relay pattern?",
      "actionable_check": "Compare relay service config between e2e and e2e-prod compose files",
      "evidence_required": ["comparison_result"],
      "pass_criteria": "Relay service uses same image, ports, volumes (minus test-specific differences)"
    }
  ],
  "mandatory_questions": [
    {
      "id": "VQ-03-M01",
      "category": "acceptance_criteria",
      "question": "Is relay service properly defined in docker-compose.e2e-prod.yml (AC-010)?",
      "actionable_check": "Verify service has Strfry image, port 8080, config mount, data volume",
      "evidence_required": ["service_definition"],
      "pass_criteria": "Complete relay service definition with all required elements",
      "acceptance_criterion": "AC-010"
    },
    {
      "id": "VQ-03-M02",
      "category": "acceptance_criteria",
      "question": "Is the NOSTLING_DEV_RELAY env var preserved for prod tests (AC-014)?",
      "actionable_check": "Verify NOSTLING_DEV_RELAY=ws://nostr-relay:8080 in e2e-test service",
      "evidence_required": ["env_value"],
      "pass_criteria": "Environment variable unchanged",
      "acceptance_criterion": "AC-014"
    }
  ]
}
