
> slim-chat@0.0.5 test
> jest

(node:66472) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/main/update/bug-workflow-latest-yml-upload.test.ts
(node:66473) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/main/update/bug-auto-update-404.test.ts
(node:66475) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/main/security/build-verify-integration.test.ts
(node:66471) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/main/security/version.test.ts
(node:66474) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/main/update/bug-duplicate-release-assets-upload.test.ts
  ‚óè Console

    console.log
      
      === BUG FIX VERIFICATION ===

      at Object.<anonymous> (src/main/update/bug-duplicate-release-assets-upload.test.ts:91:13)

    console.log
      Fixed pattern: release-artifacts/**/latest-*.yml

      at Object.<anonymous> (src/main/update/bug-duplicate-release-assets-upload.test.ts:92:13)

    console.log
      Files uploaded: [ 'latest-mac.yml', 'latest-linux.yml', 'manifest.json' ]

      at Object.<anonymous> (src/main/update/bug-duplicate-release-assets-upload.test.ts:93:13)

    console.log
      Files excluded (prevented duplicates): [ 'builder-debug.yml', 'app-update.yml' ]

      at Object.<anonymous> (src/main/update/bug-duplicate-release-assets-upload.test.ts:94:13)

    console.log
      
      Fix prevents duplicate uploads and allows release to publish.

      at Object.<anonymous> (src/main/update/bug-duplicate-release-assets-upload.test.ts:95:13)

    console.log
      Bug report: bug-reports/duplicate-release-assets-upload-report.md

      at Object.<anonymous> (src/main/update/bug-duplicate-release-assets-upload.test.ts:96:13)

    console.log
      
      === DUPLICATE BASENAMES DETECTED ===

      at Object.<anonymous> (src/main/update/bug-duplicate-release-assets-upload.test.ts:133:13)

    console.log
      Duplicates: [ 'builder-debug.yml', 'app-update.yml' ]

      at Object.<anonymous> (src/main/update/bug-duplicate-release-assets-upload.test.ts:134:13)

    console.log
      This proves the bug: multiple files with same basename will conflict.

      at Object.<anonymous> (src/main/update/bug-duplicate-release-assets-upload.test.ts:135:13)

    console.log
      
      === FILES ANALYSIS ===

      at Object.<anonymous> (src/main/update/bug-duplicate-release-assets-upload.test.ts:157:13)

    console.log
      Needed for releases: {
        'latest-mac.yml': 'Required by electron-updater for macOS updates',
        'latest-linux.yml': 'Required by electron-updater for Linux updates'
      }

      at Object.<anonymous> (src/main/update/bug-duplicate-release-assets-upload.test.ts:158:13)

    console.log
      NOT needed (causing duplicates): {
        'builder-debug.yml': 'Internal electron-builder debug info - not used by users',
        'app-update.yml': 'Embedded in app bundle (Contents/Resources/) - not needed as separate asset'
      }

      at Object.<anonymous> (src/main/update/bug-duplicate-release-assets-upload.test.ts:159:13)

    console.log
      
      Fix: Upload only latest-*.yml files, exclude builder-debug.yml and app-update.yml

      at Object.<anonymous> (src/main/update/bug-duplicate-release-assets-upload.test.ts:160:13)

(node:66469) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/main/update/url-validation.test.ts
(node:66470) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/main/ipc/handlers.test.ts
(node:66468) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/main/update/update-transition.e2e.test.ts
(node:66467) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/main/config.test.ts
(node:66466) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/main/update/manifest-generator.test.ts
(node:66465) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/main/integration.test.ts
(node:66464) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/main/index.test.ts
(node:66463) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/main/security/verify.test.ts (5.338 s)
(node:66462) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
PASS scripts/generate-manifest.test.ts (7.966 s)

Test Suites: 14 passed, 14 total
Tests:       341 passed, 341 total
Snapshots:   0 total
Time:        8.295 s, estimated 9 s
Ran all test suites.
